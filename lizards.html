
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title></title>
</head>

<body>
  <canvas id="canvas"/>
  <script>
    const canvas = document.getElementById('canvas');
    canvas.width  = window.innerWidth;
    canvas.height = window.innerHeight;
    const c = canvas.getContext('2d');
    const a = 2 * Math.PI / 6;
    const r = 40;

    async function main() {
       const res = getPositions(canvas.width, canvas.height);
       for (const {x, y, position} of snail(res)) {
         await drawLizard(x, y, position)
       }
    }
    main();
    async function drawLizard(x, y, position) { // Thanks to https://gist.github.com/ashmind/8762877
      console.log(x, y, position)
        c.save();

        if (position === 1) {
          c.translate(x- 77, y - 18);
          c.scale(0.2055, 0.2055)
          c.rotate(-Math.PI/6)
          c.fillStyle = 'red'
        } else if (position === 2) {
          c.translate(x + 22.1 , y + 77.6 );
          c.scale(0.2055, 0.2055)
          c.rotate(Math.PI + Math.PI/6 + Math.PI/300)
        } else if (position === 3) {
          c.fillStyle = 'grey'
          c.translate(x + 59.3 , y - 52);
          c.scale(0.2055, 0.2055)
          c.rotate(Math.PI/2 + Math.PI/36)
        }
        c.strokeStyle = '#000000';
        var m = c.moveTo.bind(c);
        var l = async (x,y) => {
          await new Promise(resolve => setTimeout(resolve, 30));
          c.lineTo(x,y)
          c.stroke()
        }
        if (position !== 2) {
          c.beginPath(); 
          m(246.085, 346.432);
          await l(310.291, 329.226);
          await l(319.877,348.617);
          await l(347,423.389);
          await l(396.049,410.24);
          await l(443.223,405.975);
          await l(468.301,362.542);
          await l(409.294,334.13);  //alert('here')
          await l(393.793,356.129);       
          await l(370.792,358.13);
          await l(367.294,325.13);
          await l(360.292,301.13);
          await l(365.293,286.628);
          await l(369.292,279.129);
          await l(450.793,309.128);
          await l(513.292,261.629);
          await l(513.292,251.129);
          await l(515.794,233.628);
          await l(444.327,162.162);
          await l(346.698,188.321);
          await l(332.8,177.402);
          await l(323.706,172.152);
          await l(313.821,94.278);
          await l(380.548,38.696);
          await l(376.054,31.486);
          await l(365.993,19.903);
          await l(341.712,13.971);
          await l(311.384,0.5);
          await l(301.616,21.417);
          await l(312.919,45.837);
          await l(258.808,82.735);
          await l(269.293,99.129);
          await l(269.293,114.129);
          await l(276.723,148.679);
          await l(277.61,167.614);
          await l(228.011,237.772);
          await l(241.793,169.128);
          await l(215.086,111.085);
          await l(186.293,92.628);
          await l(126.293,116.628);
          await l(96.293,108.129);
          await l(53.293,140.129);
          await l(110.873,177.956);
          await l(172.423,147);
          await l(178.637,200.242);
          await l(156.274,221.973);
          await l(147.058,285.939);
          await l(116.68,301.643);
          await l(53.057,295.748);
          await l(0.5,249.49);
          await l(36.463,327.523);
          await l(53.303,336.225);
          await l(86.94,347.064);
          await l(99.928,354.564);
          await l(119.372,353.68);
          await l(119.141,354.128);
          await l(169.292,354.128);
          await l(196.572,392.85);
          await l(232.483,428.759);
          await l(181.292,489.629);  
          await l(169.292, 507.629);
          await l(216.293, 554.63);
          await l(216.293,554.63);
          await l(234.793,510.629);
          await l(291.292,459.128);
          await l(274.944,384.45);
          await l(246.085,346.432);


          c.stroke();
          c.closePath()
          c.fill()
        }
        m(169.292,354.128);
        await l(189.793,351.131);
        await l(203.792,360.629);
        await l(213.793,364.631);
        m(246.085,346.432);
        await l(229.793,324.131);
        m(186.292,524.63);
        await l(197.293,505.13);
        m(204.793,543.131);
        await l(214.793,516.629);
        m(370.792,358.13);
        await l(364.294,371.129);
        await l(358.294,385.13);
        m(430.851,344.51);
        await l(421.294,359.63);
        await l(415.045,365.879);
        m(446.366,351.98);
        await l(436.792,372.131);
        m(360.292,301.13);
        await l(357.292,287.129);
        await l(350.293,272.63);
        m(310.291,329.226);
        await l(334.792,333.629);
        m(384.793,257.63);
        await l(401.794,265.629);
        await l(416.794,276.129);
        await l(449.829,274.058);
        await l(454.792,275.379);
        await l(471.292,255.879);
        await l(497.542,253.878);
        await l(502.294,252.129);
        m(446.264,198.084);
        await l(469.294,222.629);
        await l(478.294,226.629);
        await l(494.044,230.379);
        await l(499.792,233.879);
        m(446.264,198.084);
        await l(426.043,198.084);
        await l(415.792,195.129);
        await l(400.294,206.129);
        await l(390.292,210.629);
        await l(384.916,216.003);

        c.beginPath();
        m(418.953,196.046);
        c.bezierCurveTo(418.92999999999995,195.743,418.91799999999995,195.43699999999998,418.91799999999995,195.129);
        c.stroke();

        c.beginPath();
        m(418.918,195.129);
        c.bezierCurveTo(418.918,188.227,425.01800000000003,182.629,432.544,182.629);
        c.bezierCurveTo(440.067,182.629,446.167,188.226,446.167,195.129);
        c.bezierCurveTo(446.167,195.992,446.07,196.834,445.88899999999995,197.649);
        c.stroke();

        c.beginPath();
        m(425.478,197.954);
        c.bezierCurveTo(424.80400000000003,196.86700000000002,424.41700000000003,195.603,424.41700000000003,194.255);
        c.bezierCurveTo(424.41700000000003,190.18099999999998,427.94100000000003,186.88,432.29200000000003,186.88);
        c.bezierCurveTo(436.64300000000003,186.88,440.16700000000003,190.182,440.16700000000003,194.255);
        c.bezierCurveTo(440.16700000000003,195.66299999999998,439.745,196.978,439.016,198.097);
        c.fill();
        c.stroke();

        c.beginPath();
        m(449.829,274.058);
        c.bezierCurveTo(450.011,274.864,449.914,275.025,449.914,275.879);
        c.bezierCurveTo(449.914,282.714,443.788,288.254,436.226,288.254);
        c.bezierCurveTo(428.67, 288.254, 422.541, 282.714, 422.541, 275.879);
        c.stroke();

        c.beginPath();
        m(444.222,274.41);
        c.bezierCurveTo(444.269,274.728,444.292,275.052,444.292,275.38000000000005);
        c.bezierCurveTo(444.292,279.66,440.26399999999995,283.13300000000004,435.292,283.13300000000004);
        c.bezierCurveTo(430.32, 283.13300000000004, 426.292, 279.65900000000005, 426.292, 275.38000000000005);
        c.fill();
        c.stroke();

        c.beginPath();
        m(323.706,172.152);
        await l(327.793,190.128);
        await l(327.793,201.629);
        m(313.821,94.278);
        await l(300.793,91.128);
        m(277.61,167.614);
        await l(285.294,154.629);
        await l(295.294,140.129);
        m(328.801,8.236);
        await l(330.292,22.629);
        await l(331.73,34.941);
        await l(335.105,41.129);
        m(356.243,17.521);
        await l(354.605,27.629);
        await l(357.043,34.004);
        await l(355.168,40.191);
        m(228.011,237.772);
        await l(226.918,247.941);
        await l(224.855,256.941);
        await l(222.98,262.004);
        m(172.423,147);
        await l(173.48,141.254);
        await l(179.105,137.129);
        await l(180.793,131.316);
        await l(180.793,127.566);
        m(73.896,153.664);
        await l(97.355,136.191);
        m(93.973,166.854);
        await l(118.355,149.504);
        m(147.058,285.939);
        await l(158.48,281.691);
        await l(165.793,270.629);
        await l(169.543,262.379);
        await l(174.605,257.316);
        m(174.512,257.41);
        await l(174.793,251.129);
        c.stroke();

        c.beginPath();
        m(423.793,219.378);
        c.bezierCurveTo(397.883,242.612,348.922,228.61399999999998,317.557,237.35);
        c.bezierCurveTo(290.244,244.966,252.281,258.268,229.46900000000002,275.121);
        c.bezierCurveTo(200.02300000000002,296.875,170.07300000000004,310.542,134.78900000000002,318.253);
        c.bezierCurveTo(107.53600000000002, 324.209, 52.09000000000002, 317.57, 37.54400000000001, 289.378);
        c.stroke();

        c.beginPath();
        m(38.293,290.879);
        c.bezierCurveTo(72.042,354.368,168.02200000000002,327.793,216.989,304.077);
        c.bezierCurveTo(280.259,273.432,355.05600000000004,224.87900000000002,428.545,253.128);
        c.stroke();

        c.beginPath();
        m(174.793,251.129);
        await l(177.293,245.879);
        c.stroke();

        c.restore();
      } 
    function snail(array) {
      const vector = [];
      while (array.length) {
        vector.push(...array.shift());
        array.map(row => vector.push(row.pop()));
        array.reverse().map(row => row.reverse());
      }
      return vector.reverse().filter(Boolean);
    }
    function getPositions(width, height) {

        const result = []
        for (let y = r, i = 0; y + r * Math.sin(a) < height; y += r * Math.sin(a), i++) {
            result[i] = [];
            for (let x = r, j = 0; x + r * (1 + Math.cos(a)) < width; x += r * (1 + Math.cos(a)), y += (-1) ** j++ * r * Math.sin(a)) {
              
              position = (() => {
                let p = i % 3;
                let k = j % 2;
                if (!p) return k ? 1 : 2;
                if (p == 1) return k ? 2 : 3
                return k ? 3 : 1
              } )()
              result[i].push({x, y, position})
              // await drawLizard(x, y, position)

              

            }
        }
        return result
    }
    // function drawHexagon(x, y) {
    //     ctx.beginPath();
    //     for (let i = 0; i < 6; i++) {
    //         ctx.lineTo(x + r * Math.cos(a * i), y + r * Math.sin(a * i));
    //     }
    //     ctx.closePath();
    //     // ctx.fillStyle = 'red'
    //     // ctx.fill()
    //     ctx.stroke();
    // }

  </script>
</body>
</html>
